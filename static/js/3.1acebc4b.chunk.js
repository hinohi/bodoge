(this.webpackJsonpbodoge=this.webpackJsonpbodoge||[]).push([[3],{29:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(30);function c(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},30:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(29);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,c=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){c=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(c)throw i}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},32:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},33:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(1);n(0);function c(e){return Object(r.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,children:e.children})}function i(e){var t=e.size/50;return Object(r.jsx)("rect",{x:e.x+t,y:e.y+t,width:e.size-2*t,height:e.size-2*t,rx:3*t,ry:3*t,fill:"rgba(0, 0, 0, 0)",stroke:"#111111",onClick:e.onClick})}function o(e){var t=.9*e.size,n=.1*e.size;return Object(r.jsxs)("g",{fill:"#53B0FF",transform:"rotate(45 ".concat(e.centerX," ").concat(e.centerY,")"),children:[Object(r.jsx)("rect",{x:e.centerX-t/2,y:e.centerY-n/2,rx:n/2,width:t,height:n}),Object(r.jsx)("rect",{x:e.centerX-n/2,y:e.centerY-t/2,ry:n/2,width:n,height:t})]})}function a(e){return Object(r.jsx)("circle",{cx:e.centerX,cy:e.centerY,r:e.size/3.5,fill:"none",stroke:"#FF972D",strokeWidth:e.size/10})}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(29);var c=n(31),i=n(32);function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var c=new(Function.bind.apply(e,r));return n&&o(c,n.prototype),c}).apply(null,arguments)}var s=n(30);function l(e){return function(e){if(Array.isArray(e))return Object(s.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=Symbol("Comlink.proxy"),b=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),d=Symbol("Comlink.thrown"),h=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},j=new Map([["proxy",{canHandle:function(e){return h(e)&&e[f]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return y(e,n),[r,[r]]},deserialize:function(e){return e.start(),v(e)}}],["throw",{canHandle:function(e){return h(e)&&d in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function n(r){if(r&&r.data){var o,a=Object.assign({path:[]},r.data),s=a.id,f=a.type,b=a.path,p=(r.data.argumentList||[]).map(A);try{var h=b.slice(0,-1).reduce((function(e,t){return e[t]}),e),j=b.reduce((function(e,t){return e[t]}),e);switch(f){case 0:o=j;break;case 1:h[b.slice(-1)[0]]=A(r.data.value),o=!0;break;case 2:o=j.apply(h,p);break;case 3:var v;o=S(u(j,l(p)));break;case 4:var O=new MessageChannel,g=O.port1,x=O.port2;y(e,x),o=k(g,[g]);break;case 5:o=void 0}}catch(v){o=Object(i.a)({value:v},d,0)}Promise.resolve(o).catch((function(e){return Object(i.a)({value:e},d,0)})).then((function(e){var r=C(e),i=Object(c.a)(r,2),o=i[0],a=i[1];t.postMessage(Object.assign(Object.assign({},o),{id:s}),a),5===f&&(t.removeEventListener("message",n),m(t))}))}})),t.start&&t.start()}function m(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function v(e,t){return g(e,[],t)}function O(e){if(e)throw new Error("Proxy has been released and is not useable")}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,i=new Proxy(n,{get:function(n,c){if(O(r),c===p)return function(){return z(e,{type:5,path:t.map((function(e){return e.toString()}))}).then((function(){m(e),r=!0}))};if("then"===c){if(0===t.length)return{then:function(){return i}};var o=z(e,{type:0,path:t.map((function(e){return e.toString()}))}).then(A);return o.then.bind(o)}return g(e,[].concat(l(t),[c]))},set:function(n,i,o){O(r);var a=C(o),u=Object(c.a)(a,2),s=u[0],f=u[1];return z(e,{type:1,path:[].concat(l(t),[i]).map((function(e){return e.toString()})),value:s},f).then(A)},apply:function(n,i,o){O(r);var a=t[t.length-1];if(a===b)return z(e,{type:4}).then(A);if("bind"===a)return g(e,t.slice(0,-1));var u=x(o),s=Object(c.a)(u,2),l=s[0],f=s[1];return z(e,{type:2,path:t.map((function(e){return e.toString()})),argumentList:l},f).then(A)},construct:function(n,i){O(r);var o=x(i),a=Object(c.a)(o,2),u=a[0],s=a[1];return z(e,{type:3,path:t.map((function(e){return e.toString()})),argumentList:u},s).then(A)}});return i}function x(e){var t,n=e.map(C);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var w=new WeakMap;function k(e,t){return w.set(e,t),e}function S(e){return Object.assign(e,Object(i.a)({},f,!0))}function C(e){var t,n=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var c=0,i=function(){};return{s:i,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(j);try{for(n.s();!(t=n.n()).done;){var i=Object(c.a)(t.value,2),o=i[0],a=i[1];if(a.canHandle(e)){var u=a.serialize(e),s=Object(c.a)(u,2);return[{type:3,name:o,value:s[0]},s[1]]}}}catch(l){n.e(l)}finally{n.f()}return[{type:0,value:e},w.get(e)||[]]}function A(e){switch(e.type){case 3:return j.get(e.name).deserialize(e.value);case 0:return e.value}}function z(e,t,n){return new Promise((function(r){var c=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===c&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:c},t),n)}))}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(32);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1);n(0);function c(e){return e.hasWinner?Object(r.jsx)("button",{className:"button is-primary",onClick:e.onClick,children:"Reset"}):Object(r.jsx)("button",{className:"button is-danger",onClick:e.onClick,children:"Reset"})}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1);n(0);function c(e){return Object(r.jsx)("div",{className:"select",children:Object(r.jsx)("select",{onChange:function(t){return e.onChange(parseInt(t.target.value))},value:e.selected,disabled:e.isDisabled,children:e.items.map((function(e,t){return Object(r.jsx)("option",{value:t,children:e},t)}))})})}},40:function(e,t,n){e.exports=n.p+"connect-four.a339a33ae863b10ae019.worker.js"},44:function(e,t,n){"use strict";n.r(t),function(e){var r=n(32),c=n(35),i=n(31),o=n(1),a=n(0),u=n.n(a),s=n(34),l=n(33),f=n(36),b=n(37),p=s.a(new Worker(e,{name:"connect-four",type:void 0}));function d(e){for(var t=[],n=e.x+e.size/2,r=0;r<6;r++){var c=(5-r)*e.size,i=c+e.size/2;switch(t.push(Object(o.jsx)(l.c,{x:e.x,y:c,size:e.size,onClick:e.onClick},2*r)),e.col[r]){case"A":t.push(Object(o.jsx)(l.b,{centerX:n,centerY:i,size:e.size},2*r+1));break;case"B":t.push(Object(o.jsx)(l.a,{centerX:n,centerY:i,size:e.size},2*r+1))}}return Object(o.jsx)(u.a.Fragment,{children:t})}function h(e){var t=100;return Object(o.jsx)(l.d,{width:700,height:600,children:e.cols.map((function(n,r){var c=t*r;return Object(o.jsx)(d,{col:n,size:t,x:c,onClick:function(){return e.onClick(r)}},r)}))})}function j(e,t,n){return{cols:e.cols.map((function(n,r){if(t===r){var c=n.slice();return c.push(e.next),c}return n})),next:"A"===e.next?"B":"A",history:e.history.concat([{position:t,score:n}])}}t.default=function(){var e,t={cols:[[],[],[],[],[],[],[]],next:"A",history:[]},n=Object(a.useMemo)((function(){return[{type:"Human",name:"Human"},{type:"ABSearch",name:"Alpha-Beta Search"},{type:"MCTree",name:"MCTree (200ms)",limit:200,expansion_threshold:2,c:2},{type:"MCTree",name:"MCTree (3s)",limit:1e4,expansion_threshold:2,c:2}]}),[]),u=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){p.initialize().then((function(){return r(!0)}))}),[n]),n}(),s=Object(a.useState)("wait_for_input"),l=Object(i.a)(s,2),d=l[0],y=l[1],m=Object(a.useState)(null),v=Object(i.a)(m,2),O=v[0],g=v[1],x=Object(a.useState)(t),w=Object(i.a)(x,2),k=w[0],S=w[1],C=Object(a.useState)({A:0,B:0}),A=Object(i.a)(C,2),z=A[0],_=A[1];if(Object(a.useEffect)((function(){if(u)switch(d){case"queue_input":y("wait_for_input");var e=n[z[k.next]];switch(e.type){case"Human":break;case"ABSearch":p.search({cols:k.cols}).then((function(e){"number"===typeof e.position?(S(j(k,e.position,e.score)),y("queue_judge")):y("end")}));break;case"MCTree":p.mctree({cols:k.cols},e.limit,e.expansion_threshold,e.c).then((function(e){"number"===typeof e.position?(S(j(k,e.position,e.score)),y("queue_judge")):y("end")}))}break;case"queue_judge":y("wait_for_judge"),p.calculateWinner({cols:k.cols}).then((function(e){g(e),y(e?"end":"queue_input")}))}}),[u,d,z,n,k]),!u)return Object(o.jsx)("div",{children:"Loading..."});function E(e,t){z[e]!==t&&(_(Object(c.a)(Object(c.a)({},z),{},Object(r.a)({},e,t))),M())}function M(){S(t),g(null),y("queue_input")}e=null===O?"next player: ".concat(k.next):"F"===O?"draw":"winner: ".concat(O);var P=k.history.map((function(e,t){return null!=e.score?Object(o.jsxs)("li",{children:["AB"[t%2],": pos=",e.position," score=",e.score]},t):Object(o.jsxs)("li",{children:["AB"[t%2],": pos=",e.position]},t)}));return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"content is-flex-direction-row",children:["X",Object(o.jsx)(b.a,{items:n.map((function(e){return e.name})),selected:z.A,isDisabled:!1,onChange:function(e){return E("A",e)}}),"vs",Object(o.jsx)(b.a,{items:n.map((function(e){return e.name})),selected:z.B,isDisabled:!1,onChange:function(e){return E("B",e)}}),"O"]}),Object(o.jsx)("div",{className:"content",children:Object(o.jsx)(h,{onClick:function(e){"wait_for_input"===d&&(k.cols[e].length>=6||"Human"===n[z[k.next]].name&&(S(j(k,e)),y("queue_judge")))},cols:k.cols})}),Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("p",{children:e}),Object(o.jsx)("p",{children:d})]}),Object(o.jsx)("div",{className:"content",children:Object(o.jsx)(f.a,{hasWinner:null!==O,onClick:M})}),Object(o.jsx)("div",{className:"content",children:Object(o.jsx)("ol",{children:P})})]})}}.call(this,n(40))}}]);
//# sourceMappingURL=3.1acebc4b.chunk.js.map