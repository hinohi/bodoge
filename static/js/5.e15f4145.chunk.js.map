{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","svg.tsx","ultimate-tic-tac-toe/app.tsx"],"names":["_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","_arrayLikeToArray","arr","len","length","i","arr2","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","unsupportedIterableToArray","TypeError","Svg","props","version","xmlns","width","height","children","Square","margin","size","x","y","rx","ry","fill","stroke","onClick","Cross","a","b","transform","centerX","centerY","Circle","cx","cy","r","strokeWidth","Board","squares","map","sq","Math","floor","MidCell","id","j","cell","Cell","type","mark","Fragment","UTicTacToe","defaultInfo","useState","playingInfo","setPlayingInfo","useEffect","change","reduce","className","inner","info","midPos","innerPos","s","put"],"mappings":"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","file":"static/js/5.e15f4145.chunk.js","sourcesContent":["import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, {ReactElement, ReactNode} from 'react';\n\nexport interface SvgProps {\n  readonly width: number\n  readonly height: number\n}\n\nexport function Svg(props: SvgProps & Readonly<{ children?: ReactNode[] }>): ReactElement {\n  return (\n    <svg\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={props.width}\n      height={props.height}\n    >\n      {props.children}\n    </svg>\n  );\n}\n\nexport interface SquareProps {\n  readonly x: number\n  readonly y: number\n  readonly size: number\n  readonly onClick?: () => void\n}\n\nexport function Square(props: SquareProps): ReactElement {\n  const margin = props.size / 50;\n  return (\n    <rect\n      x={props.x + margin}\n      y={props.y + margin}\n      width={props.size - margin * 2}\n      height={props.size - margin * 2}\n      rx={margin * 3}\n      ry={margin * 3}\n      fill=\"rgba(0, 0, 0, 0)\"\n      stroke=\"#111111\"\n      onClick={props.onClick}\n    />\n  );\n}\n\nexport interface CellMarkProps {\n  readonly centerX: number\n  readonly centerY: number\n  readonly size: number\n}\n\nexport function Cross(props: CellMarkProps): ReactElement {\n  const a = props.size * 0.9;\n  const b = props.size * 0.1;\n  return (\n    <g\n      fill=\"#53B0FF\"\n      transform={`rotate(45 ${props.centerX} ${props.centerY})`}\n    >\n      <rect\n        x={props.centerX - a / 2}\n        y={props.centerY - b / 2}\n        rx={b / 2}\n        width={a}\n        height={b}\n      />\n      <rect\n        x={props.centerX - b / 2}\n        y={props.centerY - a / 2}\n        ry={b / 2}\n        width={b}\n        height={a}\n      />\n    </g>\n  );\n}\n\nexport function Circle(props: CellMarkProps): ReactElement {\n  return (\n    <circle\n      cx={props.centerX}\n      cy={props.centerY}\n      r={props.size / 3.5}\n      fill=\"none\"\n      stroke=\"#FF972D\"\n      strokeWidth={props.size / 10}\n    />\n  );\n}\n","import React, {Fragment, useState, useEffect} from 'react';\n\nimport {Svg, Cross, Circle, Square} from '../svg';\n\ntype Side = 'X' | 'O'\ntype CellType = 'E' | Side;\ntype MidCellType = Side | ReadonlyArray<CellType>;\n\ninterface BoardProps {\n  readonly size: number\n  readonly squares: ReadonlyArray<MidCellType>\n  readonly onClick: (i: number, j: number) => void\n}\n\nfunction Board(props: BoardProps) {\n  return (\n    <Svg\n      width={props.size}\n      height={props.size}\n    >\n      {props.squares.map((sq, i) => {\n        const size = props.size / 3;\n        const x = i % 3 * size;\n        const y = Math.floor(i / 3) * size;\n        return (\n          <MidCell\n            key={i}\n            id={i}\n            x={x}\n            y={y}\n            size={size}\n            squares={sq}\n            onClick={(j: number) => props.onClick(i, j)}\n          />\n        );\n      })}\n    </Svg>\n  );\n}\n\ninterface MidCellProps {\n  readonly id: number\n  readonly x: number\n  readonly y: number\n  readonly size: number\n  readonly squares: MidCellType\n  readonly onClick: (i: number) => void\n}\n\nfunction MidCell(props: MidCellProps) {\n  if (typeof props.squares === 'object') {\n    const margin = props.size / 10;\n    return (\n      <Fragment>\n        <Square x={props.x} y={props.y} size={props.size}/>\n        {props.squares.map((cell, i) => {\n          const size = (props.size - margin * 2) / 3;\n          const x = props.x + i % 3 * size + margin;\n          const y = props.y + Math.floor(i / 3) * size + margin;\n          return (\n            <Cell\n              key={i}\n              id={i}\n              x={x}\n              y={y}\n              size={size}\n              type={cell}\n              onClick={() => props.onClick(i)}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  } else {\n    return (\n      <Cell\n        id={props.id}\n        x={props.x}\n        y={props.y}\n        size={props.size}\n        type={props.squares}\n      />\n    );\n  }\n}\n\ninterface CellProps {\n  readonly id: number\n  readonly x: number\n  readonly y: number\n  readonly size: number\n  readonly type: CellType\n  readonly onClick?: () => void\n}\n\nfunction Cell(props: CellProps) {\n  const cx = props.x + props.size / 2;\n  const cy = props.y + props.size / 2;\n  let mark;\n  switch (props.type) {\n    case 'X':\n      mark = <Cross centerX={cx} centerY={cy} size={props.size}/>;\n      break;\n    case 'O':\n      mark = <Circle centerX={cx} centerY={cy} size={props.size}/>;\n      break;\n  }\n  return (\n    <React.Fragment>\n      {mark}\n      <Square\n        x={props.x}\n        y={props.y}\n        size={props.size}\n        onClick={props.onClick}\n      />\n    </React.Fragment>\n  );\n}\n\ninterface PlayingInfo {\n  readonly squares: ReadonlyArray<MidCellType>\n  readonly next: Side\n}\n\nfunction put(info: PlayingInfo, midPos: number, innerPos: number): PlayingInfo {\n  const squares = info.squares.slice();\n  const inner = squares[midPos];\n  if (typeof inner === 'object') {\n    const s = inner.slice()\n    s[innerPos] = info.next;\n    squares[midPos] = s;\n  }\n  return {\n    squares,\n    next: info.next === 'X' ? 'O' : 'X',\n  };\n}\n\nfunction UTicTacToe() {\n  const defaultInfo = {\n    squares: Array(9).fill(Array(9).fill('E')),\n    next: 'X',\n  } as const;\n  const [playingInfo, setPlayingInfo] = useState<PlayingInfo>(defaultInfo);\n\n  useEffect(() => {\n    let change = false;\n    const squares = playingInfo.squares.map((sq) => {\n      if (typeof sq === 'object') {\n        if (sq.reduce((a, b) => a + (b !== 'E' ? 1 : 0), 0) > 2) {\n          change = true;\n          return 'X';\n        }\n      }\n      return sq\n    });\n    if (change) {\n      setPlayingInfo({\n        squares,\n        next: playingInfo.next,\n      });\n    }\n  }, [playingInfo]);\n\n  function handleClick(i: number, j: number): void {\n    const inner = playingInfo.squares[i]\n    if (typeof inner !== 'object') return;\n    if (inner[j] !== 'E') return;\n    setPlayingInfo(put(playingInfo, i, j));\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"content\">\n        <Board\n          size={9 * 50}\n          squares={playingInfo.squares}\n          onClick={handleClick}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default UTicTacToe;\n"],"sourceRoot":""}